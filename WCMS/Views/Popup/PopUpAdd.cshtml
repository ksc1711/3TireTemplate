@using WCMS.Web;
@{
    ViewBag.Title = "PopupAdd";
}

<div id="content" class="container">
        <br />

    <div class="row">
        <div class="col-md-12">
            <table class="table table table-bordered">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col" class="col-md-2">Menu</th>
                        <th scope="col" class="col-md-5" colspan="2">Value </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row" class="table-dark"> No. </th>
                        <td class="table-light" colspan="2"> Automatically increase by 1 upon registration </td>
                    </tr>
                    <tr>
                        <th scope="row" class="table-dark"> Title </th>
                        <td class="table-light" colspan="2">
                            <input type="text" id="txt_popupTitle" class="form-control" />
                        </td>
                    </tr>
                    <tr>
                        <th scope="row" class="table-dark"> Expiration Date </th>
                        <td class="table-light">
                            StartDate :
                            <input type="text" id="txt_startDate" class="form-control" />
                        </td>
                        <td class="table-light">
                            StartDate :
                            <input type="text" id="txt_endDate" class="form-control" />
                        </td>
                    </tr>
                    <tr>
                        <th scope="row" class="table-dark"> Join Member </th>
                        <td class="table-light" colspan="2">
                            <input type="text" id="txt_joinMember" class="form-control" />
                        </td>
                    </tr>
                    <tr>
                        <th scope="row" class="table-dark"> Descript </th>
                        <td class="table-light" colspan="2">
                            <input type="text" id="txt_descript" class="form-control" />
                        </td>
                    </tr>
                    <tr>
                        <th scope="row" class="table-dark"> Html </th>
                        <td class="table-light" colspan="2">
                            <textarea class="form-control rounded-0" id="tarea_popupHtml" rows="10"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row" class="table-dark"> Script </th>
                        <td class="table-light" colspan="2">
                            <textarea class="form-control rounded-0" id="tarea_popupScript" rows="10"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row" class="table-dark" rowspan="2"> fileUpload </th>
                        <td class="table-light">
                            <form enctype="multipart/form-data" method="post" name="form_file">
                                <input type="file" id="fileInfo" class="file-upload" />
                            </form>
                        </td>
                        <td class="table-light">
                            <input type="button" class="btn btn-primary pull-right" value="Upload" onclick="javascript:uploadImage();">
                        </td>
                    </tr>
                    <tr>
                        <td class="table-light" colspan="2">
                            <ul class="list-group" id="ul_filePaths">
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="row">
                <div class="col-md-12">
                    <input type="submit" class="btn btn-primary pull-right" value="Poup Add">
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .ui-autocomplete {
        z-index: 9999 !important;
        max-height: 300px;
        overflow-y: auto;
        /* prevent horizontal scrollbar */
        overflow-x: hidden;
    }
</style>

<script type="text/javascript">
    $('#txt_endDate').datepicker({
        dateFormat: 'yy-mm-dd',
        prevText: '<i class="fa fa-chevron-left"></i>',
        nextText: '<i class="fa fa-chevron-right"></i>'
    });

    $('#txt_startDate').datepicker({
        dateFormat: 'yy-mm-dd',
        prevText: '<i class="fa fa-chevron-left"></i>',
        nextText: '<i class="fa fa-chevron-right"></i>',
    });

    function uploadImage() {
        var form = $('#form_file')[0];
        var formData = new FormData(form);
        formData.append("fileInfo", $("#fileInfo")[0].files[0]);

        GetImageAddPath(formData);
    }

    function GetImageAddPath(formData) {
        $.ajax({
            url: '@Url.Action("GetImageAddPath", "Image")',
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            dataType:"json",
            success: function (data) {
                if (data.Status == "S")
                    $("#ul_filePaths").append("<li class='list-group-item'>" + data.Message + "</li>");
                else
                    alert(data.Message);
            },
            error : function(xhr, status) {
                alert(xhr + " : " + status);
            }
        });
    }
</script>